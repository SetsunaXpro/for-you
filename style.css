:root {
  --baby-blue: #cfe7ff;
  --baby-blue-soft: #e5f2ff;
  --navy: #10162f;
  --pastel-pink: #ffc4d6;
  --pastel-lavender: #d7c4ff;
  --pastel-mint: #c7f5d9;
  --pastel-yellow: #fff3b0;
  --text-main: #35405a;
  --text-soft: #5a6685;
  --card-radius: 22px;
  --shadow-soft: 0 8px 20px rgba(24, 46, 89, 0.15);
  --transition-fast: 0.2s ease;
  --transition-med: 0.35s ease;
  --font-main: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
    "Segoe UI", sans-serif;
}

*, 
*::before, 
*::after {
  box-sizing: border-box;
}

html, 
body {
  margin: 0;
  padding: 0;
  height: 100%;
}

body {
  font-family: var(--font-main);
  background: radial-gradient(circle at top, #f8fbff 0, var(--baby-blue-soft) 60%);
  color: var(--text-main);
  display: flex;
  justify-content: center;
  align-items: stretch;
}

/* APP LAYOUT */

#app {
  position: relative;
  width: 100%;
  max-width: 480px;
  height: 100vh;
  overflow: hidden;
  padding: 10px;
}

/* PAGES */

.page {
  position: absolute;
  inset: 10px;
  border-radius: var(--card-radius);
  opacity: 0;
  pointer-events: none;
  transform: translateY(10px) scale(0.98);
  transition:
    opacity var(--transition-med),
    transform var(--transition-med);
  display: flex;
  align-items: center;
  justify-content: center;
}

.page.active {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0) scale(1);
}

.card {
  width: 100%;
  height: 100%;
  border-radius: var(--card-radius);
  box-shadow: var(--shadow-soft);
  padding: 18px 18px 16px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.card-home, 
.card-story {
  background: linear-gradient(160deg, #ffffff, var(--baby-blue));
}

.card-scrapbook {
  background: var(--navy);
  color: #f5f6ff;
}

.card-final {
  background: linear-gradient(180deg, #0c1124, #151b3a);
  color: #f8f3ff;
}

/* BUTTONS */

.btn {
  border: none;
  border-radius: 999px;
  padding: 10px 18px;
  font-size: 14px;
  font-weight: 600;
  letter-spacing: 0.02em;
  cursor: pointer;
  transition:
    transform var(--transition-fast),
    box-shadow var(--transition-fast),
    background var(--transition-fast),
    color var(--transition-fast),
    opacity var(--transition-fast);
  touch-action: manipulation;
}

.btn:active {
  transform: scale(0.97);
}

.btn.primary {
  background: linear-gradient(135deg, var(--pastel-pink), var(--pastel-lavender));
  color: #412538;
  box-shadow: 0 6px 14px rgba(226, 159, 191, 0.4);
}

.btn.primary:hover {
  box-shadow: 0 8px 18px rgba(226, 159, 191, 0.5);
}

.btn.secondary {
  background: rgba(255, 255, 255, 0.7);
  color: var(--text-main);
}

.btn.ghost {
  background: rgba(255, 255, 255, 0.08);
  color: inherit;
  border: 1px dashed rgba(255, 255, 255, 0.35);
}

/* HOME PAGE */

.card-home {
  align-items: center;
  text-align: center;
}

.home-header h1 {
  font-size: 26px;
  margin: 0 0 4px;
  letter-spacing: 0.04em;
  color: #304165;
}

.home-header {
  position: relative;
  padding-top: 8px;
}

.sparkles {
  position: relative;
  height: 22px;
}

.sparkle {
  position: absolute;
  width: 9px;
  height: 9px;
  border-radius: 2px;
  transform: rotate(45deg);
  opacity: 0.85;
}

.sparkle.s1 {
  left: 12%;
  top: 2px;
  background: var(--pastel-pink);
}

.sparkle.s2 {
  right: 10%;
  top: 0;
  background: var(--pastel-yellow);
}

.sparkle.s3 {
  left: 32%;
  bottom: 0;
  background: var(--pastel-mint);
}

.sparkle.s4 {
  right: 30%;
  bottom: 2px;
  background: var(--pastel-lavender);
}

.home-message {
  font-size: 14px;
  margin: 6px 12px 20px;
  color: var(--text-soft);
}

.home-buttons {
  display: flex;
  gap: 10px;
  justify-content: center;
}

.btn-no {
  cursor: default;
  opacity: 0.6;
}

/* FLOATING DECOS */

.floating-decos {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  z-index: -1;
}

.deco {
  position: absolute;
  opacity: 0.45;
  filter: blur(0.2px);
  animation: float 8s ease-in-out infinite alternate;
}

.deco-heart {
  width: 18px;
  height: 16px;
  background: var(--pastel-pink);
  border-radius: 18px 18px 0 0;
  transform: rotate(-45deg);
  left: 6%;
  top: 10%;
}

.deco-heart::before, 
.deco-heart::after {
  content: "";
  position: absolute;
  width: 18px;
  height: 16px;
  background: inherit;
  border-radius: 18px 18px 0 0;
}

.deco-heart::before {
  left: 8px;
}

.deco-heart::after {
  top: 8px;
}

.deco-star {
  width: 10px;
  height: 10px;
  background: var(--pastel-yellow);
  transform: rotate(45deg);
  right: 12%;
  top: 18%;
}

.deco-circle {
  width: 14px;
  height: 14px;
  border-radius: 999px;
  background: var(--pastel-mint);
  right: 8%;
  bottom: 10%;
}

.deco:nth-child(2) {
  left: 20%;
  bottom: 14%;
  animation-delay: -2s;
}

.deco:nth-child(3) {
  right: 17%;
  bottom: 18%;
  animation-delay: -4s;
}

.deco:nth-child(4) {
  left: 78%;
  top: 30%;
  animation-delay: -1s;
}

.deco:nth-child(5) {
  left: 40%;
  top: 72%;
  animation-delay: -3s;
}

.deco:nth-child(6) {
  right: 4%;
  top: 55%;
  animation-delay: -5s;
}

@keyframes float {
  from {
    transform: translateY(0) translateX(0) scale(1) rotate(0deg);
  }
  to {
    transform: translateY(-16px) translateX(6px) scale(1.05) rotate(5deg);
  }
}

/* MUSIC TOGGLE */

.music-toggle {
  position: absolute;
  top: 16px;
  right: 18px;
  width: 34px;
  height: 34px;
  border-radius: 999px;
  border: none;
  background: rgba(255, 255, 255, 0.9);
  box-shadow: 0 4px 12px rgba(38, 55, 94, 0.25);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  cursor: pointer;
  z-index: 10;
  color: #4e5470;
  transition:
    transform var(--transition-fast),
    box-shadow var(--transition-fast),
    background var(--transition-fast);
}

.music-toggle.active {
  background: linear-gradient(135deg, var(--pastel-mint), var(--pastel-yellow));
}

.music-toggle:active {
  transform: scale(0.95);
}

/* STORY PAGE */

.card-story {
  padding-top: 40px;
  padding-bottom: 14px;
}

.story-header h2 {
  font-size: 18px;
  margin: 0 0 4px;
  text-align: center;
}

.story-header p {
  font-size: 12px;
  margin: 0 10px 8px;
  text-align: center;
  color: var(--text-soft);
}

.story-scene-indicator {
  display: flex;
  justify-content: center;
  gap: 6px;
  margin-bottom: 6px;
}

.scene-dot {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: rgba(72, 95, 138, 0.3);
}

.scene-dot.active {
  width: 18px;
  background: linear-gradient(135deg, var(--pastel-pink), var(--pastel-lavender));
}

.story-scene-container {
  flex: 1;
  min-height: 0;
  border-radius: 18px;
  background: rgba(255, 255, 255, 0.72);
  padding: 10px;
  display: flex;
}

.scene {
  display: none;
  flex-direction: column;
  width: 100%;
}

.scene-active {
  display: flex;
}

.scene h3 {
  font-size: 15px;
  margin: 0 0 4px;
}

.scene-caption {
  font-size: 12px;
  margin: 0 0 8px;
  color: var(--text-soft);
}

/* Scene arts */

.scene-art {
  flex: 1;
  border-radius: 14px;
  position: relative;
  overflow: hidden;
}

/* Bedroom */

.scene-art.bedroom {
  background: linear-gradient(180deg, #fefbff, #f5f6ff);
  border: 1px solid rgba(145, 163, 214, 0.4);
}

.bedroom .bed {
  position: absolute;
  left: 6%;
  bottom: 6%;
  width: 52%;
  height: 42%;
  border-radius: 14px;
  background: linear-gradient(135deg, var(--pastel-pink), var(--pastel-lavender));
  box-shadow: 0 5px 10px rgba(175, 137, 193, 0.4);
}

.bedroom .desk {
  position: absolute;
  right: 6%;
  bottom: 6%;
  width: 32%;
  height: 30%;
  border-radius: 12px;
  background: linear-gradient(180deg, #fffdf7, var(--pastel-yellow));
  box-shadow: 0 4px 10px rgba(204, 181, 120, 0.4);
}

.bedroom .plant {
  position: absolute;
  right: 10%;
  top: 8%;
  width: 20%;
  height: 32%;
  border-radius: 12px;
  background: linear-gradient(180deg, var(--pastel-mint), #8eddba);
}

.bedroom .label {
  position: absolute;
  left: 50%;
  bottom: 4px;
  transform: translateX(-50%);
  font-size: 9px;
  color: #3b2b3a;
  background: rgba(255, 255, 255, 0.7);
  padding: 2px 6px;
  border-radius: 999px;
}

/* Garden */

.scene-art.garden {
  background: linear-gradient(180deg, #e2f8ff, #d0f5e2);
  border: 1px solid rgba(115, 192, 180, 0.5);
}

.garden .flower {
  position: absolute;
  bottom: 8%;
  width: 22%;
  height: 36%;
  border-radius: 18px 18px 4px 4px;
  background: var(--pastel-pink);
  box-shadow: 0 5px 12px rgba(214, 140, 170, 0.5);
}

.garden .flower-left {
  left: 10%;
}

.garden .flower-right {
  right: 10%;
  background: var(--pastel-lavender);
}

.garden .butterfly {
  position: absolute;
  width: 18px;
  height: 14px;
  border-radius: 14px 14px 14px 0;
  background: var(--pastel-yellow);
  box-shadow: 0 0 0 2px rgba(255, 243, 176, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
}

.garden .butterfly::after {
  content: "ü¶ã";
}

.garden .butterfly-1 {
  left: 32%;
  top: 22%;
}

.garden .butterfly-2 {
  right: 26%;
  top: 12%;
  background: var(--pastel-mint);
}

.garden .label {
  position: absolute;
  left: 50%;
  bottom: 4px;
  transform: translateX(-50%);
  font-size: 9px;
  background: rgba(255, 255, 255, 0.7);
  padding: 2px 6px;
  border-radius: 999px;
}

/* Starry */

.scene-art.starry {
  background: radial-gradient(circle at top, #485cec, #151738);
  border: 1px solid rgba(155, 170, 255, 0.6);
}

.starry .star {
  position: absolute;
  width: 10px;
  height: 10px;
  background: var(--pastel-yellow);
  transform: rotate(45deg);
  box-shadow: 0 0 8px rgba(255, 244, 189, 0.9);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 9px;
}

.starry .star::after {
  content: "‚≠ê";
  transform: rotate(-45deg);
}

.starry .star:nth-child(1) {
  left: 14%;
  top: 20%;
}

.starry .star:nth-child(2) {
  right: 18%;
  top: 30%;
}

.starry .star:nth-child(3) {
  left: 45%;
  top: 10%;
}

.starry .star:nth-child(4) {
  left: 36%;
  bottom: 18%;
}

/* Treasure */

.scene-art.treasure {
  background: linear-gradient(180deg, #fef6e9, #ffe1c6);
  border: 1px solid rgba(238, 190, 142, 0.8);
}

.treasure .chest {
  position: absolute;
  left: 12%;
  bottom: 12%;
  width: 38%;
  height: 46%;
  border-radius: 12px;
  background: linear-gradient(180deg, #f3a76b, #d97839);
  box-shadow: 0 6px 12px rgba(204, 123, 63, 0.7);
}

.treasure .pile {
  position: absolute;
  right: 8%;
  bottom: 10%;
  width: 30%;
  height: 32%;
  border-radius: 18px;
  background: linear-gradient(135deg, #ffe6fb, #ffd9c4);
}

.treasure .bow {
  position: absolute;
  left: 52%;
  top: 14%;
  width: 36%;
  height: 28%;
  border-radius: 40px;
  background: linear-gradient(135deg, var(--pastel-pink), var(--pastel-lavender));
  box-shadow: 0 4px 10px rgba(200, 138, 204, 0.6);
}

.treasure .label {
  position: absolute;
  left: 50%;
  bottom: 4px;
  transform: translateX(-50%);
  font-size: 9px;
  background: rgba(255, 255, 255, 0.75);
  padding: 2px 6px;
  border-radius: 999px;
}

/* Clickable items */

.clickable {
  position: relative;
  cursor: pointer;
  transition: transform var(--transition-fast), box-shadow var(--transition-fast),
    filter var(--transition-fast);
}

.clickable:active {
  transform: scale(0.95) translateY(1px);
}

/* Dialogue */

.story-dialogue {
  min-height: 46px;
  margin-top: 8px;
  border-radius: 999px;
  padding: 8px 12px;
  background: rgba(255, 255, 255, 0.7);
  font-size: 11px;
  color: var(--text-soft);
  display: flex;
  align-items: center;
}

.story-dialogue .dialogue-text {
  margin: 0;
}

.story-footer {
  display: flex;
  justify-content: space-between;
  padding-top: 8px;
}

/* MODAL */

.modal {
  position: absolute;
  inset: 0;
  background: rgba(14, 21, 40, 0.35);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 20;
}

.modal.show {
  display: flex;
}

.modal-content {
  width: 88%;
  max-width: 360px;
  background: #ffffff;
  border-radius: 18px;
  padding: 16px 16px 14px;
  text-align: center;
  box-shadow: 0 10px 24px rgba(25, 42, 92, 0.45);
}

.modal-content h3 {
  margin: 0 0 6px;
  font-size: 18px;
}

.modal-text {
  font-size: 13px;
  margin: 0 0 12px;
}

/* SCRAPBOOK */

.scrapbook-wrapper {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.scrapbook-book {
  flex: 1;
  border-radius: 16px;
  background: radial-gradient(circle at top, #1f2951, #07091a);
  position: relative;
  overflow: hidden;
  border: 1px solid rgba(158, 183, 255, 0.35);
  box-shadow: 0 8px 18px rgba(0, 0, 0, 0.45);
}

.scrapbook-page {
  position: absolute;
  inset: 0;
  padding: 10px 10px 8px;
  display: none;
}

.scrapbook-page-active {
  display: block;
}

.scrapbook-header h2 {
  font-size: 15px;
  margin: 0 0 6px;
  text-align: center;
}

.scrapbook-content {
  display: flex;
  flex-direction: column;
  gap: 8px;
  height: calc(100% - 28px);
}

.polaroids {
  display: flex;
  gap: 6px;
  justify-content: space-between;
}

.polaroid {
  flex: 1;
  background: #fdfafa;
  border-radius: 10px;
  padding: 6px 5px 4px;
  box-shadow: 0 6px 12px rgba(10, 9, 24, 0.55);
  position: relative;
  transform: rotate(-1.5deg);
}

.polaroid:nth-child(2) {
  transform: rotate(1.8deg);
}

.polaroid-photo {
  display: block;
  position: relative;
  border-radius: 7px;
  overflow: hidden;
  height: 82px;
  background: linear-gradient(135deg, var(--pastel-mint), var(--pastel-lavender));
  cursor: pointer;
}

.polaroid-photo input {
  display: none;
}

.photo-placeholder {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  text-align: center;
  padding: 0 8px;
  color: #233044;
}

.photo-img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: none;
}

.polaroid-caption {
  margin-top: 4px;
  width: 100%;
  border: none;
  background: transparent;
  resize: none;
  font-size: 10px;
  font-family: inherit;
  text-align: center;
  color: #4b3543;
}

/* Timeline */

.timeline {
  flex: 1;
  background: rgba(11, 15, 42, 0.85);
  border-radius: 10px;
  padding: 6px 7px;
  position: relative;
  overflow: hidden;
}

.timeline-title {
  margin: 0 0 3px;
  font-size: 11px;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  color: #f3deff;
}

.timeline-item {
  display: flex;
  align-items: flex-start;
  gap: 4px;
  margin-bottom: 4px;
}

.timeline-item:last-child {
  margin-bottom: 0;
}

.timeline-dot {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: linear-gradient(135deg, var(--pastel-pink), var(--pastel-yellow));
  margin-top: 4px;
  flex-shrink: 0;
}

.timeline-text {
  flex: 1;
  min-height: 28px;
  background: rgba(34, 47, 90, 0.9);
  border-radius: 7px;
  border: none;
  font-size: 10px;
  color: #f2ecff;
  padding: 3px 6px;
  resize: none;
  font-family: inherit;
}

/* Doodles */

.scrapbook-doodles .doodle {
  position: absolute;
}

.doodle.heart {
  width: 14px;
  height: 12px;
  background: var(--pastel-pink);
  border-radius: 14px 14px 0 0;
  transform: rotate(-40deg);
  left: 8px;
  top: 8px;
  opacity: 0.9;
}

.doodle.heart::before, 
.doodle.heart::after {
  content: "";
  position: absolute;
  width: 14px;
  height: 12px;
  background: inherit;
  border-radius: 14px 14px 0 0;
}

.doodle.heart::before {
  left: 6px;
}

.doodle.heart::after {
  top: 6px;
}

.doodle.star {
  width: 10px;
  height: 10px;
  background: var(--pastel-yellow);
  right: 10px;
  top: 12px;
  transform: rotate(45deg);
}

.doodle.tape {
  width: 48px;
  height: 10px;
  background: rgba(255, 255, 255, 0.18);
  border-radius: 4px;
}

.doodle.tape-top {
  left: 50%;
  transform: translateX(-50%) rotate(-7deg);
  top: 4px;
}

.doodle.tape-bottom {
  right: 32px;
  bottom: 4px;
  transform: rotate(5deg);
}

/* Back page */

.back-content {
  display: flex;
  flex-direction: column;
  gap: 6px;
  height: 100%;
}

.back-title {
  margin: 0 0 2px;
  font-size: 13px;
  text-align: center;
}

.notes-grid {
  flex: 1;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 6px;
}

.note {
  border-radius: 8px;
  border: none;
  font-size: 10px;
  padding: 5px 6px;
  background: rgba(233, 216, 255, 0.1);
  color: #f7f4ff;
  resize: none;
  font-family: inherit;
}

/* Flip button & footer */

.scrapbook-flip {
  align-self: center;
  padding: 7px 14px;
  font-size: 11px;
}

.scrapbook-footer {
  display: flex;
  justify-content: flex-end;
  padding-top: 4px;
}

/* FINAL PAGE */

.card-final {
  position: relative;
  padding: 24px 18px 18px;
}

.final-stars {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
}

.final-star {
  position: absolute;
  width: 9px;
  height: 9px;
  background: var(--pastel-yellow);
  transform: rotate(45deg);
  opacity: 0.9;
  box-shadow: 0 0 12px rgba(255, 239, 193, 0.9);
  animation: twinkle 3.5s ease-in-out infinite alternate;
}

.final-star:nth-child(1) {
  left: 8%;
  top: 18%;
  animation-delay: 0s;
}

.final-star:nth-child(2) {
  right: 10%;
  top: 22%;
  animation-delay: -1s;
}

.final-star:nth-child(3) {
  left: 24%;
  top: 8%;
  animation-delay: -2s;
}

.final-star:nth-child(4) {
  right: 30%;
  bottom: 22%;
  animation-delay: -1.6s;
}

.final-star:nth-child(5) {
  left: 14%;
  bottom: 20%;
  animation-delay: -0.7s;
}

@keyframes twinkle {
  from {
    opacity: 0.4;
    transform: rotate(45deg) scale(0.8);
  }
  to {
    opacity: 1;
    transform: rotate(45deg) scale(1.1);
  }
}

.final-message {
  position: relative;
  z-index: 1;
  height: 100%;
  overflow: auto;
  padding-right: 6px;
}

.final-message h2 {
  margin: 0 0 8px;
  font-size: 18px;
  text-align: center;
  color: #ffd7f0;
}

.final-message p {
  font-size: 13px;
  line-height: 1.4;
  margin: 6px 0;
  color: #f6f3ff;
}

.final-photo {
  display: block;
  margin: 12px auto 0;
  width: 86%;
  max-width: 300px;
  height: auto;
  border-radius: 12px;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.45);
  object-fit: cover;
}

/* Scrollbar (for final message if needed) */

.final-message::-webkit-scrollbar {
  width: 4px;
}

.final-message::-webkit-scrollbar-thumb {
  background: rgba(222, 191, 255, 0.8);
  border-radius: 999px;
}

/* RESPONSIVE TWEAKS */

@media (max-height: 640px) {
  .card {
    padding: 14px 14px 10px;
  }
  .card-final {
    padding-top: 18px;
  }
  .home-header h1 {
    font-size: 22px;
  }
  .home-message {
    font-size: 13px;
  }
  .story-header p {
    font-size: 11px;
  }
}